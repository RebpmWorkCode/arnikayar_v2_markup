{{ _view.assign('title', 'Новое объявление') }}
{{ html.script(['https://api-maps.yandex.ru/2.1/?lang=ru_RU', 'YandexMaps.locale/rus.js', 'YandexMaps.choose-object.js', 'Locations.Location/edit'], {'block': 'scriptCustom'}) }}
{% set complexCategorySearch = _view.loadHelper('ComplexCategories.ComplexCategorySearch') %}
{% set location = _view.loadHelper('Locations.Location') %}
<div class="new-obj wrap">
    <div class="breadcrumbs"><ul><li><a href="/agency/realty/add">Новое объявление</a></li></ul></div>
    {{ form.create('Advertisement', {'enctype': 'multipart/form-data', 'url': {'plugin': 'agency', 'controller': 'realty', 'action': 'add'}}) }}
        {{ form.hidden('from_site', {'value': true}) }}
        {{ form.hidden('Contractor.0.id') }}
        <div class="wrapper">
            <p>Вид объекта</p>
            <div class="tabs__categories">
                {% set tabCategories = [
                    {"id": 4, "title": "Дом или Таунхаус", "active": true},
                    {"id": 37, "title": "Земельный участок", "active": false},
                    {"id": 7, "title": "Квартира или Апартамент", "active": false},
                    {"id": 2, "title": "Коммерческая недвижимость", "active": false},
                ] %}
                {% for tabCategory in tabCategories %}
                    <label{{tabCategory.active ? ' class="active"' : ''}}>
                        <input type="radio" name="data[Advertisement][category_id]" class="hidden" value="{{ tabCategory.id }}" {{tabCategory.active ? 'checked' : ''}}>
                        {{ tabCategory.title }}
                    </label>
                {% endfor %}
            </div>
        </div>
        <div class="step step1 active">
            <div class="group {{ complexCategorySearch.getClassesFilter(null, {'data-rent': [37], 'data-sell': [37], 'categories': [37]})|join(' ')|replace({'input ': ''}) }}">
                <p>Статус участка</p>
                {{ form.input('CategoryParamValue.lot_type', {
                    'type': 'select',
                    'class': 'w4-4 select2',
                    'label': false,
                    'options': landCategories,
                    'empty': true,
                }) }}
            </div>
            <div class="group {{ complexCategorySearch.getClassesFilter(null, {'data-rent': [2], 'data-sell': [2], 'categories': [2]})|join(' ')|replace({'input ': ''}) }}">
                <p>Тип помещения</p>
                {{ form.input('CategoryParamValue.commercial_type', {
                    'type': 'select',
                    'class': 'w4-4 select2',
                    'label': false,
                    'options': commercialTypes,
                    'empty': true,
                }) }}
            </div>
            <span class="title">Расположение</span>
            <div class="map" style="float: initial;">
                <input type="text" name="data[Advertisement][location_full]" placeholder="Адрес" minlength="3" class="search-location-field" data-source="/admin/locations/location_info/info" data-source-autocomplete="/locations/locations/search_info/Locations.RltbaseLocationInfoLib.json">
                {{ _view.element('YandexMaps.map', {
                    'mapOptions': {'style': 'width: 100%; height:100%'},
                    'mapWrapperOptions': {'class':'map-wrapper map-area', 'style': ''},
                }) }}
                {{ location.setConfigFormEdit('Location.realty_location_site_form') }}
                <div class="hidden">{{ _view.element('Locations.Location/form', {'notUseLocationJS': true, 'showSearchLocation': false}) }}</div>
            </div>
            <div class="group {{ complexCategorySearch.getClassesFilter(null, {'data-rent': [7], 'data-sell': [7], 'categories': [7]})|join(' ')|replace({'input ': ''}) }}">
                <p>Номер квартиры</p>
                <label>
                    {{ form.input('Advertisement.apartment', {
                        'type': 'text',
                        'class': 'w1-4',
                        'placeholder': '-',
                        'minlength': '1',
                        'required': true,
                        'label': false,
                        'div': false,
                    }) }}
                </label>
            </div>
            <span class="title">Контакты</span>
            <div class="group">
                <p>Телефон</p>
                {{ form.input('Contractor.0.phone', {
                    'type': 'tel',
                    'placeholder': '+7 999 999 99 99',
                    'pattern': '\\+7(\\s+)?[0-9]{3}(\\s+)?[0-9]{3}(\\s+)?[0-9]{2}(\\s+)?[0-9]{2}',
                    'required': true,
                    'label': false,
                    'div': false,
                }) }}
            </div>
            <div class="group radio">
                <p>Право собственности</p>
                {{ form.input('CategoryParamValue.avito_property_right', {
                    'type': 'radio',
                    'label': false,
                    'legend': false,
                    'hiddenField': false,
                    'div': false,
                    'options': avitoPropertyRights|map(title => '<span>' ~ title ~ '</span>'),
                    'before': '<label>',
                    'between': ['</label><label>','</label><label>'],
                    'after': '</label>',
                }) }}
            </div>
            <div class="group">
                <p>Ваше имя</p>
                {{ form.input('Contractor.0.fio', {
                    'type': 'text',
                    'class': 'w4-4',
                    'placeholder': '-',
                    'pattern': '[а-яёА-ЯЁ]{2,}',
                    'required': true,
                    'label': false,
                    'div': false,
                }) }}
            </div>
            <div class="group">
                <p>Кадастровый номер</p>
                {{ form.input('CategoryParamValue.cadastral_number', {
                    'type': 'text',
                    'class': 'cadastre w3-4',
                    'placeholder': '00:00:0000000:0000',
                    'pattern': '\\d{2}:\\d{2}:\\d{7}:\\d{4}',
                    'minlength': 18,
                    'required': true,
                    'label': false,
                    'div': false,
                }) }}
            </div>
            <div class="group {{ complexCategorySearch.getClassesFilter(null, {'data-rent': [4], 'data-sell': [4], 'categories': [4]})|join(' ')|replace({'input ': ''}) }}">
                <p>Кадастровый номер участка</p>
                {{ form.input('CategoryParamValue.lot_cadastral_number', {
                    'type': 'text',
                    'class': 'cadastre w3-4',
                    'placeholder': '00:00:0000000:0000',
                    'pattern': '\\d{2}:\\d{2}:\\d{7}:\\d{4}',
                    'minlength': 18,
                    'required': true,
                    'label': false,
                    'div': false,
                }) }}
            </div>
            <div class="seporation"></div>
            <div class="steps">
                <a href="#" class="out btn">Выйти</a>
                <a href="#" class="next btn" data-step="step2">Продолжить</a>
            </div>
        </div>
        <div class="step step2">
            <div id="categoryParams"></div>
            <div class="seporation"></div>
            <div class="steps">
                <a href="#" class="prev btn" data-step="step1">Назад</a>
                <a href="#" class="out btn">Сохранить и выйти</a>
                <a href="#" class="next btn" data-step="step3">Продолжить</a>
            </div>
        </div>
        <div class="step step3">
            <span class="title">Фотографии</span>
            <div class="infobox">
                <p>
                    <span>С хорошими фото просмотров у дома в 5 раз больше.</span>
                    Покажите все помещения в доме, участок и отдельные постройки. Если добавите схему дома, покупателям будет проще сориентироваться.
                </p>
                <img src="images/icon/house.svg" alt="">
            </div>
            <div class="mediabox photo">
                <div class="left">
                    <p>Фотографии <span>Не больше 60</span></p>
                </div>
                <div class="right">
                    <div class="previews">
                        <label>
                            <input type="file" name="photos" multiple="">
                            <span></span>
                        </label>
                    </div>
                    <input type="url" placeholder="Ссылка на фото">
                </div>
            </div>
            <div class="mediabox video">
                <div class="left">
                    <p>Видео</p>
                </div>
                <div class="right">
                    <div class="previews">
                        <div class="video-prev">
                            <video>
                                <source src="">Your browser does not support HTML5 video.
                            </video>
                        </div>
                        <label>
                            <input type="file" name="file[]" accept="video/*">
                            <span></span>
                        </label>
                    </div>
                    <input type="url" placeholder="Ссылка на видео">
                </div>
            </div>
            <div class="textarea">
                <span class="title">Описание</span>
                <textarea name="description" placeholder="Расскажите, что есть в доме, на участке, поблизости. Опишите состояние построек, коммуникаций.&#10;С качественным описанием просмотров у дома в 2 раза больше."></textarea>
            </div>
            <span class="title">Дополнительная информация</span>
            <div class="group radio">
                <p>Архитектура</p>
                <label>
                    <input type="radio" name="archi" value="Хай-тек">
                    <span>Хай-тек</span>
                </label>
                <label>
                    <input type="radio" name="archi" value="Шале">
                    <span>Шале</span>
                </label>
                <label>
                    <input type="radio" name="archi" value="Классика">
                    <span>Классика</span>
                </label>
                <label>
                    <input type="radio" name="archi" value="Иное">
                    <span>Иное</span>
                </label>
            </div>
            <div class="group checkbox">
                <p></p>
                <div class="case">
                    <label>
                        <input type="checkbox">
                        <span>Цоколь</span>
                    </label>
                    <label>
                        <input type="checkbox">
                        <span>Мансарда</span>
                    </label>
                    <label>
                        <input type="checkbox">
                        <span>Эксплуатируемая кровля</span>
                    </label>
                </div>
            </div>
            <div class="additionals">
                <p>Зоны отдыха</p>
                <div class="case">
                    <label>
                        <input type="checkbox" value="Мангальная зона или барбекю">
                        <span>Мангальная зона или барбекю</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Беседка">
                        <span>Беседка</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Летняя кухня">
                        <span>Летняя кухня</span>
                    </label>
                </div>
            </div>
            <div class="group radio">
                <p>Ландшафт</p>
                <label>
                    <input type="radio" name="landscape" value="Отсутствует">
                    <span>Отсутствует</span>
                </label>
                <label>
                    <input type="radio" name="landscape" value="Базовый">
                    <span>Базовый</span>
                </label>
                <label>
                    <input type="radio" name="landscape" value="Профессиональный">
                    <span>Профессиональный</span>
                </label>
            </div>
            <div class="additionals">
                <div class="case">
                    <label>
                        <input type="checkbox" value="Плодовый сад">
                        <span>Плодовый сад</span>
                    </label>
                </div>
            </div>
            <div class="group radio line">
                <p>Автополив</p>
                <label>
                    <input type="radio" name="landscape" value="Есть">
                    <span>Есть</span>
                </label>
                <label>
                    <input type="radio" name="landscape" value="Нет">
                    <span>Нет</span>
                </label>
            </div>
            <div class="additionals">
                <p>Инфраструктура</p>
                <div class="case">
                    <label>
                        <input type="checkbox" value="Магазин">
                        <span>Магазин</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Аптека">
                        <span>Аптека</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Детский сад">
                        <span>Детский сад</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Школа">
                        <span>Школа</span>
                    </label>
                </div>
            </div>
            <div class="additionals">
                <p>Охрана объекта</p>
                <div class="case">
                    <label>
                        <input type="checkbox" value="КПП/Шлагбаум">
                        <span>КПП/Шлагбаум</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Видеонаблюдение">
                        <span>Видеонаблюдение</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Вневедомственная охрана">
                        <span>Вневедомственная охрана</span>
                    </label>
                </div>
            </div>
            <div class="group radio line">
                <p>Забор</p>
                <label>
                    <input type="radio" name="fence" value="Есть">
                    <span>Есть</span>
                </label>
                <label>
                    <input type="radio" name="fence" value="Нет">
                    <span>Нет</span>
                </label>
            </div>
            <div class="additionals">
                <p>Вид из дома</p>
                <div class="case">
                    <label>
                        <input type="checkbox" value="Море">
                        <span>Море</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Горы">
                        <span>Горы</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Лес">
                        <span>Лес</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Город">
                        <span>Город</span>
                    </label>
                    <label>
                        <input type="checkbox" value="Река">
                        <span>Река</span>
                    </label>
                </div>
            </div>
            <div class="group radio line">
                <p>Панорамные окна (французские окна<br>или окна в пол)</p>
                <label>
                    <input type="radio" name="window" value="Да">
                    <span>Да</span>
                </label>
                <label>
                    <input type="radio" name="window" value="Нет">
                    <span>Нет</span>
                </label>
            </div>
            <div class="group radio">
                <p>Участок</p>
                <label>
                    <input type="radio" name="area" value="Да">
                    <span>Ровный</span>
                </label>
                <label>
                    <input type="radio" name="area" value="Нет">
                    <span>Террасированный</span>
                </label>
            </div>
            <div class="group radio line">
                <p>Свободная планировка</p>
                <label>
                    <input type="radio" name="layout" value="Да">
                    <span>Да</span>
                </label>
                <label>
                    <input type="radio" name="layout" value="Нет">
                    <span>Нет</span>
                </label>
            </div>
            <div class="group radio line">
                <p>Камин</p>
                <label>
                    <input type="radio" name="fireplace" value="Есть">
                    <span>Есть</span>
                </label>
                <label>
                    <input type="radio" name="fireplace" value="Нет">
                    <span>Нет</span>
                </label>
            </div>
            <div class="seporation"></div>
            <div class="group">
                <p>Как хотели бы назвать ваш объект на сайте</p>
                <textarea class="w4-4 name" placeholder="не более 80 символов" maxlength="80" minlength="1" required></textarea>
            </div>
            <div class="group">
                <p>Цена</p>
                <label class="price">
                    <input type="text" data-mask="000 000 000 000 000" minlength="1" required>
                </label>
            </div>
            <div class="group">
                <p>Комиссия риэлтора, которая включена в стоимость</p>
                <label class="commission">
                    <input type="text" data-mask="00" minlength="1" required>
                </label>
            </div>
            <div class="seporation"></div>
            <div class="steps">
                <a href="#" class="prev btn" data-step="step2">Назад</a>
                <a href="#" class="out btn">Сохранить и выйти</a>
                <button type="submit" class="next btn">опубликовать объект на сайте</button>
            </div>
        </div>
    {{ form.end() }}
</div>
